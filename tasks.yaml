# This task is executed before any real deployment task
- role: ['primary-elasticsearch_kibana']
  stage: post_deployment/8000
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/check_environment_configuration.pp
    puppet_modules: puppet/modules
    timeout: 300

- role: ['elasticsearch_kibana', 'primary-elasticsearch_kibana']
  stage: post_deployment/8100
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/elasticsearch.pp
    puppet_modules: puppet/modules
    timeout: 600

- role: ['elasticsearch_kibana', 'primary-elasticsearch_kibana']
  stage: post_deployment/8100
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/kibana.pp
    puppet_modules: puppet/modules
    timeout: 1200

- role: ['primary-elasticsearch_kibana']
  stage: post_deployment/8100
  type: puppet
  parameters:
    puppet_manifest: puppet/manifests/provision_services.pp
    puppet_modules: puppet/modules
    timeout: 600
